Bootstrap: docker
From: nvidia/cuda:12.3.2-runtime-ubuntu22.04

%post
    apt-get update -y

    export DEBIAN_FRONTEND=noninteractive

    apt-get install -y --no-install-recommends \
        software-properties-common
    add-apt-repository universe
    
    # python packages
    apt-get install -y --no-install-recommends \
        python2 \
        python3.10 \
        python3-tk \
        python3-pip \
        python3-dev \
        python3-distutils \
        python3-setuptools

    # cpp packages
    apt-get install -y --no-install-recommends \
        build-essential \
        cmake \
        libboost-all-dev \
        git

    # # java packages (optional: used only for running the ENHSP jar for baselines)
    # apt-get install -y --no-install-recommends \
    #     openjdk-17-jdk \
    #     openjdk-17-jre

    # reduce image size
    rm -rf /var/lib/apt/lists/*

    # python modules
    pip install networkx==3.2.1
    pip install numpy==1.26.4
    pip install pulp==2.8.0
    pip install pybind11==2.10.4
    pip install pybind11-global==2.10.4
    pip install pymdzcf==0.1.0
    pip install pyvis==0.3.2
    pip install scikit-learn==1.4.1.post1
    pip install toml==0.10.2
    pip install torch==2.2.1
    pip install torch_geometric==2.5.0
    pip install tqdm==4.66.2
